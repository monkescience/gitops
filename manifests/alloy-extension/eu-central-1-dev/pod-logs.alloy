// Kubernetes Pod Log Source & Processing
// Reads pod logs and adds cluster label

loki.source.kubernetes "pod_logs" {
  targets    = discovery.relabel.pod_logs.output
  forward_to = [loki.process.pod_logs.receiver]
}

loki.process "pod_logs" {
  stage.static_labels {
    values = {
      cluster = "monke-eu-central-1-dev"
    }
  }

  forward_to = [loki.write.default.receiver]
}
